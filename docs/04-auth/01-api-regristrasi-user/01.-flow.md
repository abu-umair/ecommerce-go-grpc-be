# Flow Registrasi User

// Flow ini menjelaskan bagaimana proses Registrasi User berjalan di gRPC (Go)  
// dan analoginya di Laravel (REST API).

---

## 1. Client Request
// Client (misalnya: frontend React, Flutter, atau Postman)  
// mengirim request Register dengan data:  
// - FullName  
// - Email  
// - Password  
// - PasswordConfirmation

// gRPC: request berupa `auth.RegisterRequest` (protobuf message)  
// Laravel: request berupa `POST /auth/register` dengan body JSON

---

## 2. Handler Layer
// gRPC: request pertama kali diterima oleh `authHandler.Register()`  
// Laravel: request pertama kali masuk ke `AuthController@register`

// Handler bertugas:  
// - Validasi input (gunakan `utils.CheckValidation` di Go, atau `$request->validate()` di Laravel)  
// - Kalau gagal → balikan ValidationErrorResponse  
// - Kalau sukses → teruskan ke Service Layer

---

## 3. Service Layer
// gRPC: `authService.Register()`  
// Laravel: `AuthService::register()` (bisa dipanggil di dalam Controller)

// Service bertugas:  
// - Cek apakah Password == PasswordConfirmation  
// - Cek apakah email sudah terdaftar (panggil Repository)  
// - Kalau ada error → return BadRequestResponse  
// - Kalau lolos → Hash password (Go pakai bcrypt, Laravel pakai bcrypt() helper)  
// - Buat entity User  
// - Kirim ke Repository untuk disimpan

---

## 4. Repository Layer
// gRPC: `authRepository.InsertUser()`  
// Laravel: `User::create([...])`

// Repository bertugas komunikasi dengan database:  
// - Query SQL di Go (pakai `db.ExecContext`)  
// - ORM Eloquent di Laravel (`INSERT INTO users ...` otomatis)

// Hasil akhir: user tersimpan di database.

---

## 5. Response
// gRPC: return `auth.RegisterResponse` dengan `utils.SuccessResponse("User is registered")`  
// Laravel: return JSON `{"status":200,"message":"User is registered"}`

// Jadi di kedua stack, flow-nya sama:  
// Client → Handler/Controller → Service → Repository/Model → Database → Response

---

## Diagram Singkat

// gRPC
Client → Handler → Service → Repository → Database → Response

// Laravel
Client → Controller → Service (opsional) → Model (Eloquent) → Database → Response
